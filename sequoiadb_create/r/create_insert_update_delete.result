drop table if exists table_create_t1,table_create_t2,table_create_t3,table_create_t4,table_create_t5;
drop database if exists mysqltest;
drop view if exists v1;
SET sql_mode = 'NO_ENGINE_SUBSTITUTION';
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
create table table_create_t1 (b char(0));
insert into table_create_t1 values (""),(null);
select * from table_create_t1;
b

NULL
drop table if exists table_create_t1;
create table table_create_t1 (b char(0) not null);
create table if not exists table_create_t1 (b char(0) not null);
Warnings:
Note	1050	Table 'table_create_t1' already exists
insert into table_create_t1 values (""),(null);
Warnings:
Warning	1048	Column 'b' cannot be null
select * from table_create_t1;
b


drop table table_create_t1;
create table table_create_t1 (a int not null,primary key (a));
drop table table_create_t1;
create table table_create_t2 select * from table_create_t1;
ERROR 42S02: Table 'test.table_create_t1' doesn't exist
create table table_create_t2 select auto+1 from table_create_t1;
ERROR 42S02: Table 'test.table_create_t1' doesn't exist
drop table if exists table_create_t1,table_create_t2;
Warnings:
Note	1051	Unknown table 'test.table_create_t1'
Note	1051	Unknown table 'test.table_create_t2'
create table table_create_t1 (b char(0) not null, index(b));
ERROR 42000: The used storage engine can't index column 'b'
drop table if exists table_create_t1;
Warnings:
Note	1051	Unknown table 'test.table_create_t1'
create table not_existing_database.test (a int);
ERROR 42000: Unknown database 'not_existing_database'
create table `a` (a int);
show create table `a`;
Table	Create Table
a	CREATE TABLE `a` (
  `a` int(11) DEFAULT NULL
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
create table table_create_t1 like `a`;
drop table `a`;
drop table `table_create_t1`;
create table `aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa` (aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa int);
ERROR 42000: Identifier name 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' is too long
create table a (`aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa` int);
ERROR 42000: Identifier name 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' is too long
create table table_create_t1 (a tinyint default 1000);
ERROR 42000: Invalid default value for 'a'
create table table_create_t1 (a varchar(5) default 'abcdef');
ERROR 42000: Invalid default value for 'a'
create table table_create_t1 (a varchar(5) default 'abcde');
insert into table_create_t1 values();
select * from table_create_t1;
a
abcde
alter table table_create_t1 alter column a set default 'abcdef';
ERROR 42000: Invalid default value for 'a'
drop table table_create_t1;
create table `` (a int);
ERROR 42000: Incorrect table name ''
drop table if exists ``;
ERROR 42000: Incorrect table name ''
create table table_create_t1 (`` int);
ERROR 42000: Incorrect column name ''
create table table_create_t1 (i int, index `` (i));
ERROR 42000: Incorrect index name ''
create table table_create_t1 (i int);
lock tables table_create_t1 read;
create table table_create_t2 (j int);
ERROR HY000: Table 'table_create_t2' was not locked with LOCK TABLES
create temporary table table_create_t2 (j int);
drop temporary table table_create_t2;
unlock tables;
drop table table_create_t1;
create table table_create_t1 (a int not null primary key, B CHAR(20));
insert into table_create_t1 (a, b) values (0, "hello"),(1, "my"),(2, "world");
create table table_create_t2 (key (b)) select * from table_create_t1;
explain select * from table_create_t2 where b="world";
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	table_create_t2	NULL	ref	B	B	21	const	1	100.00	NULL
Warnings:
Note	1003	/* select#1 */ select `test`.`table_create_t2`.`a` AS `a`,`test`.`table_create_t2`.`B` AS `B` from `test`.`table_create_t2` where (`test`.`table_create_t2`.`B` = 'world')
select * from table_create_t2 where b="world";
a	B
drop table table_create_t1,table_create_t2;
create table table_create_t1(x varchar(50) );
create table table_create_t2 select x from table_create_t1 where 1=2;
describe table_create_t1;
Field	Type	Null	Key	Default	Extra
x	varchar(50)	YES		NULL	
describe table_create_t2;
Field	Type	Null	Key	Default	Extra
x	varchar(50)	YES		NULL	
drop table table_create_t2;
create table table_create_t2 select now() as a , curtime() as b, curdate() as c , 1+1 as d , 1.0 + 1 as e , 33333333333333333 + 3 as f;
describe table_create_t2;
Field	Type	Null	Key	Default	Extra
a	datetime	NO		0000-00-00 00:00:00	
b	time	NO		00:00:00	
c	date	NO		0000-00-00	
d	int(3)	NO		0	
e	decimal(3,1)	NO		0.0	
f	bigint(19)	NO		0	
drop table table_create_t2;
create table table_create_t2 select CAST("2001-12-29" AS DATE) as d, CAST("20:45:11" AS TIME) as t, CAST("2001-12-29  20:45:11" AS DATETIME) as dt;
describe table_create_t2;
Field	Type	Null	Key	Default	Extra
d	date	YES		NULL	
t	time	YES		NULL	
dt	datetime	YES		NULL	
drop table table_create_t1,table_create_t2;
create table table_create_t1 (a tinyint);
create table table_create_t2 (a int) select * from table_create_t1;
describe table_create_t1;
Field	Type	Null	Key	Default	Extra
a	tinyint(4)	YES		NULL	
describe table_create_t2;
Field	Type	Null	Key	Default	Extra
a	int(11)	YES		NULL	
drop table if exists table_create_t2;
create table table_create_t2 (a int, a float) select * from table_create_t1;
ERROR 42S21: Duplicate column name 'a'
drop table if exists table_create_t2;
Warnings:
Note	1051	Unknown table 'test.table_create_t2'
create table table_create_t2 (a int) select a as b, a+1 as b from table_create_t1;
ERROR 42S21: Duplicate column name 'b'
drop table if exists table_create_t2;
Warnings:
Note	1051	Unknown table 'test.table_create_t2'
create table table_create_t2 (b int) select a as b, a+1 as b from table_create_t1;
ERROR 42S21: Duplicate column name 'b'
drop table if exists table_create_t1,table_create_t2;
Warnings:
Note	1051	Unknown table 'test.table_create_t2'
CREATE TABLE table_create_t1 (a int not null);
INSERT INTO table_create_t1 values (1),(2),(1);
CREATE TABLE table_create_t2 (primary key(a)) SELECT * FROM table_create_t1;
ERROR HY000: Got error 49962 from storage engine
SELECT * from table_create_t2;
ERROR 42S02: Table 'test.table_create_t2' doesn't exist
DROP TABLE table_create_t1;
DROP TABLE IF EXISTS table_create_t2;
Warnings:
Note	1051	Unknown table 'test.table_create_t2'
create table table_create_t1 ( k1 varchar(2), k2 int, primary key(k1,k2));
insert into table_create_t1 values ("a", 1), ("b", 2);
insert into table_create_t1 values ("c", NULL);
ERROR 23000: Column 'k2' cannot be null
insert into table_create_t1 values (NULL, 3);
ERROR 23000: Column 'k1' cannot be null
insert into table_create_t1 values (NULL, NULL);
ERROR 23000: Column 'k1' cannot be null
drop table table_create_t1;
create table table_create_t1 select x'4132';
drop table table_create_t1;
create table table_create_t1 select 1,2,3;
create table if not exists table_create_t1 select 1,2;
Warnings:
Note	1050	Table 'table_create_t1' already exists
create table if not exists table_create_t1 select 1,2,3,4;
Warnings:
Note	1050	Table 'table_create_t1' already exists
create table if not exists table_create_t1 select 1;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
1	2	3
1	2	3
drop table table_create_t1;
flush status;
create table table_create_t1 (a int not null, b int, primary key (a));
insert into table_create_t1 values (1,1);
create table if not exists table_create_t1 select 2;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
a	b
1	1
create table if not exists table_create_t1 select 3 as 'a',4 as 'b';
Warnings:
Note	1050	Table 'table_create_t1' already exists
show warnings;
Level	Code	Message
Note	1050	Table 'table_create_t1' already exists
show status like "Opened_tables";
Variable_name	Value
Opened_tables	1
select * from table_create_t1;
a	b
1	1
drop table table_create_t1;
create table `table_create_t1 `(a int);
ERROR 42000: Incorrect table name 'table_create_t1 '
create database `db1 `;
ERROR 42000: Incorrect database name 'db1 '
create table table_create_t1(`a ` int);
ERROR 42000: Incorrect column name 'a '
create table table_create_t1 (a int,);
ERROR 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1
create table table_create_t1 (a int,,b int);
ERROR 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'b int)' at line 1
create table table_create_t1 (,b int);
ERROR 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'b int)' at line 1
create table table_create_t1 (a int, key(a));
create table table_create_t2 (b int, foreign key(b) references table_create_t1(a), key(b));
drop table if exists table_create_t2,table_create_t1;
create table table_create_t1(id int not null, name char(20));
insert into table_create_t1 values(10,'mysql'),(20,'monty- the creator');
create table table_create_t2(id int not null);
insert into table_create_t2 values(10),(20);
create table table_create_t3 like table_create_t1;
show create table table_create_t3;
Table	Create Table
table_create_t3	CREATE TABLE `table_create_t3` (
  `id` int(11) NOT NULL,
  `name` char(20) DEFAULT NULL
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
select * from table_create_t3;
id	name
create table if not exists table_create_t3 like table_create_t1;
Warnings:
Note	1050	Table 'table_create_t3' already exists
show create table table_create_t3;
Table	Create Table
table_create_t3	CREATE TABLE `table_create_t3` (
  `id` int(11) NOT NULL,
  `name` char(20) DEFAULT NULL
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
select * from table_create_t3;
id	name
drop table table_create_t1,table_create_t2,table_create_t3;
create table table_create_t1(a int,b int,c int unsigned,d date,e char,f datetime,g time,h blob);
insert into table_create_t1(a)values(1);
insert into table_create_t1(a,b,c,d,e,f,g,h)
values(2,-2,2,'1825-12-14','a','2003-1-1 3:2:1','4:3:2','binary data');
select * from table_create_t1;
a	b	c	d	e	f	g	h
1	NULL	NULL	NULL	NULL	NULL	NULL	NULL
2	-2	2	1825-12-14	a	2003-01-01 03:02:01	04:03:02	binary data
select a, 
ifnull(b,cast(-7 as signed)) as b, 
ifnull(c,cast(7 as unsigned)) as c, 
ifnull(d,cast('2000-01-01' as date)) as d, 
ifnull(e,cast('b' as char)) as e,
ifnull(f,cast('2000-01-01' as datetime)) as f, 
ifnull(g,cast('5:4:3' as time)) as g,
ifnull(h,cast('yet another binary data' as binary)) as h,
addtime(cast('1:0:0' as time),cast('1:0:0' as time)) as dd 
from table_create_t1;
a	b	c	d	e	f	g	h	dd
1	-7	7	2000-01-01	b	2000-01-01 00:00:00	05:04:03	yet another binary data	02:00:00
2	-2	2	1825-12-14	a	2003-01-01 03:02:01	04:03:02	binary data	02:00:00
create table table_create_t2
select
a, 
ifnull(b,cast(-7                        as signed))   as b,
ifnull(c,cast(7                         as unsigned)) as c,
ifnull(d,cast('2000-01-01'              as date))     as d,
ifnull(e,cast('b'                       as char))     as e,
ifnull(f,cast('2000-01-01'              as datetime)) as f,
ifnull(g,cast('5:4:3'                   as time))     as g,
ifnull(h,cast('yet another binary data' as binary))   as h,
addtime(cast('1:0:0' as time),cast('1:0:0' as time))  as dd
from table_create_t1;
explain table_create_t2;
Field	Type	Null	Key	Default	Extra
a	int(11)	YES		NULL	
b	bigint(11)	NO		0	
c	bigint(10) unsigned	NO		0	
d	date	YES		NULL	
e	varchar(1)	NO			
f	datetime	YES		NULL	
g	time	YES		NULL	
h	longblob	NO		NULL	
dd	time	YES		NULL	
select * from table_create_t2;
a	b	c	d	e	f	g	h	dd
1	-7	7	2000-01-01	b	2000-01-01 00:00:00	05:04:03	yet another binary data	02:00:00
2	-2	2	1825-12-14	a	2003-01-01 03:02:01	04:03:02	binary data	02:00:00
drop table table_create_t1, table_create_t2;
create table table_create_t1 (a tinyint, b smallint, c mediumint, d int, e bigint, f float(3,2), g double(4,3), h decimal(5,4), i year, j date, k timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, l datetime, m enum('a','b'), n set('a','b'), o char(10));
create table table_create_t2 select ifnull(a,a), ifnull(b,b), ifnull(c,c), ifnull(d,d), ifnull(e,e), ifnull(f,f), ifnull(g,g), ifnull(h,h), ifnull(i,i), ifnull(j,j), ifnull(k,k), ifnull(l,l), ifnull(m,m), ifnull(n,n), ifnull(o,o) from table_create_t1;
show create table table_create_t2;
Table	Create Table
table_create_t2	CREATE TABLE `table_create_t2` (
  `ifnull(a,a)` tinyint(4) DEFAULT NULL,
  `ifnull(b,b)` smallint(6) DEFAULT NULL,
  `ifnull(c,c)` mediumint(9) DEFAULT NULL,
  `ifnull(d,d)` int(11) DEFAULT NULL,
  `ifnull(e,e)` bigint(20) DEFAULT NULL,
  `ifnull(f,f)` float(3,2) DEFAULT NULL,
  `ifnull(g,g)` double(4,3) DEFAULT NULL,
  `ifnull(h,h)` decimal(5,4) DEFAULT NULL,
  `ifnull(i,i)` year(4) DEFAULT NULL,
  `ifnull(j,j)` date DEFAULT NULL,
  `ifnull(k,k)` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `ifnull(l,l)` datetime DEFAULT NULL,
  `ifnull(m,m)` varchar(1) DEFAULT NULL,
  `ifnull(n,n)` varchar(3) DEFAULT NULL,
  `ifnull(o,o)` varchar(10) DEFAULT NULL
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
drop table table_create_t1,table_create_t2;
create table table_create_t1(str varchar(10) default 'def',strnull varchar(10),intg int default '10',rel double default '3.14');
insert into table_create_t1 values ('','',0,0.0);
describe table_create_t1;
Field	Type	Null	Key	Default	Extra
str	varchar(10)	YES		def	
strnull	varchar(10)	YES		NULL	
intg	int(11)	YES		10	
rel	double	YES		3.14	
create table table_create_t2 select default(str) as str, default(strnull) as strnull, default(intg) as intg, default(rel) as rel from table_create_t1;
describe table_create_t2;
Field	Type	Null	Key	Default	Extra
str	varchar(10)	YES		NULL	
strnull	varchar(10)	YES		NULL	
intg	int(11)	YES		NULL	
rel	double	YES		NULL	
drop table table_create_t1, table_create_t2;
create table table_create_t1(name varchar(10), age smallint default -1);
describe table_create_t1;
Field	Type	Null	Key	Default	Extra
name	varchar(10)	YES		NULL	
age	smallint(6)	YES		-1	
create table table_create_t2(name varchar(10), age smallint default - 1);
describe table_create_t2;
Field	Type	Null	Key	Default	Extra
name	varchar(10)	YES		NULL	
age	smallint(6)	YES		-1	
drop table table_create_t1, table_create_t2;
create table table_create_t1(cenum enum('a'), cset set('b'));
create table table_create_t2(cenum enum('a','a'), cset set('b','b'));
Warnings:
Note	1291	Column 'cenum' has duplicated value 'a' in ENUM
Note	1291	Column 'cset' has duplicated value 'b' in SET
create table table_create_t3(cenum enum('a','A','a','c','c'), cset set('b','B','b','d','d'));
Warnings:
Note	1291	Column 'cenum' has duplicated value 'a' in ENUM
Note	1291	Column 'cenum' has duplicated value 'A' in ENUM
Note	1291	Column 'cenum' has duplicated value 'c' in ENUM
Note	1291	Column 'cset' has duplicated value 'b' in SET
Note	1291	Column 'cset' has duplicated value 'B' in SET
Note	1291	Column 'cset' has duplicated value 'd' in SET
drop table table_create_t1, table_create_t2, table_create_t3;
create database mysqltest;
use mysqltest;
select database();
database()
mysqltest
drop database mysqltest;
select database();
database()
NULL
create user mysqltest_1;
select database(), user();
database()	user()
NULL	mysqltest_1@localhost
drop user mysqltest_1;
use test;
create table table_create_t1 (a int, index `primary` (a));
ERROR 42000: Incorrect index name 'primary'
create table table_create_t1 (a int, index `PRIMARY` (a));
ERROR 42000: Incorrect index name 'PRIMARY'
create table table_create_t1 (`primary` int, index(`primary`));
show create table table_create_t1;
Table	Create Table
table_create_t1	CREATE TABLE `table_create_t1` (
  `primary` int(11) DEFAULT NULL,
  KEY `primary_2` (`primary`)
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
create table table_create_t2 (`PRIMARY` int, index(`PRIMARY`));
show create table table_create_t2;
Table	Create Table
table_create_t2	CREATE TABLE `table_create_t2` (
  `PRIMARY` int(11) DEFAULT NULL,
  KEY `PRIMARY_2` (`PRIMARY`)
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
create table table_create_t3 (a int);
alter table table_create_t3 add index `primary` (a);
ERROR 42000: Incorrect index name 'primary'
alter table table_create_t3 add index `PRIMARY` (a);
ERROR 42000: Incorrect index name 'PRIMARY'
create table table_create_t4 (`primary` int);
alter table table_create_t4 add index(`primary`);
show create table table_create_t4;
Table	Create Table
table_create_t4	CREATE TABLE `table_create_t4` (
  `primary` int(11) DEFAULT NULL,
  KEY `primary_2` (`primary`)
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
create table table_create_t5 (`PRIMARY` int);
alter table table_create_t5 add index(`PRIMARY`);
show create table table_create_t5;
Table	Create Table
table_create_t5	CREATE TABLE `table_create_t5` (
  `PRIMARY` int(11) DEFAULT NULL,
  KEY `PRIMARY_2` (`PRIMARY`)
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
drop table table_create_t1, table_create_t2, table_create_t3, table_create_t4, table_create_t5;
CREATE TABLE table_create_t1(id varchar(10) NOT NULL PRIMARY KEY, dsc longtext);
INSERT INTO table_create_t1 VALUES ('5000000001', NULL),('5000000003', 'Test'),('5000000004', NULL);
CREATE TABLE table_create_t2(id varchar(15) NOT NULL, proc varchar(100) NOT NULL, runID varchar(16) NOT NULL, start datetime NOT NULL, PRIMARY KEY  (id,proc,runID));
INSERT INTO table_create_t2 VALUES ('5000000001', 'proc01', '20031029090650', '2003-10-29 13:38:40'),('5000000001', 'proc02', '20031029090650', '2003-10-29 13:38:51'),('5000000001', 'proc03', '20031029090650', '2003-10-29 13:38:11'),('5000000002', 'proc09', '20031024013310', '2003-10-24 01:33:11'),('5000000002', 'proc09', '20031024153537', '2003-10-24 15:36:04'),('5000000004', 'proc01', '20031024013641', '2003-10-24 01:37:29'),('5000000004', 'proc02', '20031024013641', '2003-10-24 01:37:39');
CREATE TABLE table_create_t3  SELECT table_create_t1.dsc,COUNT(DISTINCT table_create_t2.id) AS countOfRuns  FROM table_create_t1 LEFT JOIN table_create_t2 ON (table_create_t1.id=table_create_t2.id) GROUP BY table_create_t1.id;
SELECT * FROM table_create_t3;
dsc	countOfRuns
NULL	1
Test	0
NULL	1
drop table table_create_t1, table_create_t2, table_create_t3;
create table table_create_t1 (b bool not null default false);
create table table_create_t2 (b bool not null default true);
insert into table_create_t1 values ();
insert into table_create_t2 values ();
select * from table_create_t1;
b
0
select * from table_create_t2;
b
1
drop table table_create_t1,table_create_t2;
create table table_create_t1 (a int);
create table table_create_t1 select * from table_create_t1;
ERROR 42S01: Table 'table_create_t1' already exists
create table table_create_t2 union = (table_create_t1) select * from table_create_t1;
ERROR HY000: 'test.table_create_t2' is not BASE TABLE
flush tables with read lock;
unlock tables;
drop table table_create_t1;
create table table_create_t1(column.name int);
ERROR 42000: Incorrect table name 'column'
create table table_create_t1(test.column.name int);
ERROR 42000: Incorrect table name 'column'
create table table_create_t1(xyz.table_create_t1.name int);
ERROR 42000: Incorrect database name 'xyz'
create table table_create_t1(table_create_t1.name int);
create table table_create_t2(test.table_create_t2.name int);
drop table table_create_t1,table_create_t2;
CREATE TABLE table_create_t1 (f1 VARCHAR(255) CHARACTER SET utf8);
CREATE TABLE table_create_t2 AS SELECT LEFT(f1,171) AS f2 FROM table_create_t1 UNION SELECT LEFT(f1,171) AS f2 FROM table_create_t1;
DESC table_create_t2;
Field	Type	Null	Key	Default	Extra
f2	varchar(171)	YES		NULL	
DROP TABLE table_create_t1,table_create_t2;
CREATE TABLE table_create_t12913 (f1 ENUM ('a','b')) AS SELECT 'a' AS f1;
SELECT * FROM table_create_t12913;
f1
a
DROP TABLE table_create_t12913;
create database mysqltest;
use mysqltest;
drop database mysqltest;
create table test.table_create_t1 like x;
ERROR 3D000: No database selected
drop table if exists test.table_create_t1;
create database mysqltest;
use mysqltest;
create view v1 as select 'foo' from dual;
create table table_create_t1 like v1;
ERROR HY000: 'mysqltest.v1' is not BASE TABLE
drop view v1;
drop database mysqltest;
create database mysqltest;
create database if not exists mysqltest character set latin2;
Warnings:
Note	1007	Can't create database 'mysqltest'; database exists
show create database mysqltest;
Database	Create Database
mysqltest	CREATE DATABASE `mysqltest` /*!40100 DEFAULT CHARACTER SET latin1 */
drop database mysqltest;
use test;
create table table_create_t1 (a int);
create table if not exists table_create_t1 (a int);
Warnings:
Note	1050	Table 'table_create_t1' already exists
drop table table_create_t1;
create table table_create_t1 (
a varchar(112) not null,
primary key (a)
) select 'test' as a ;
show create table table_create_t1;
Table	Create Table
table_create_t1	CREATE TABLE `table_create_t1` (
  `a` varchar(112) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
drop table table_create_t1;
CREATE TABLE table_create_t2 (
a int(11) default NULL
);
insert into table_create_t2 values(111);
create table table_create_t1 ( 
a varchar(12) not null, 
b int not null, primary key (a)
) select a, 1 as b from table_create_t2 ;
show create table table_create_t1;
Table	Create Table
table_create_t1	CREATE TABLE `table_create_t1` (
  `a` varchar(12) NOT NULL,
  `b` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
drop table table_create_t1;
create table table_create_t1 ( 
a varchar(12) not null, 
b int not null, primary key (a)
) select a, 1 as c from table_create_t2 ;
Warnings:
Warning	1364	Field 'b' doesn't have a default value
show create table table_create_t1;
Table	Create Table
table_create_t1	CREATE TABLE `table_create_t1` (
  `b` int(11) NOT NULL,
  `a` varchar(12) NOT NULL,
  `c` int(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`a`)
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
drop table table_create_t1;
create table table_create_t1 ( 
a varchar(12) not null, 
b int not null, primary key (a)
) select a, 1 as c from table_create_t2 ;
Warnings:
Warning	1364	Field 'b' doesn't have a default value
show create table table_create_t1;
Table	Create Table
table_create_t1	CREATE TABLE `table_create_t1` (
  `b` int(11) NOT NULL,
  `a` varchar(12) NOT NULL,
  `c` int(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`a`)
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
drop table table_create_t1;
create table table_create_t1 ( 
a varchar(12) not null,
b int not null, primary key (a)
) select 'a' as a , 1 as b from table_create_t2 ;
show create table table_create_t1;
Table	Create Table
table_create_t1	CREATE TABLE `table_create_t1` (
  `a` varchar(12) NOT NULL,
  `b` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
drop table table_create_t1;
create table table_create_t1 ( 
a varchar(12),
b int not null, primary key (a)
) select 'a' as a , 1 as b from table_create_t2 ;
show create table table_create_t1;
Table	Create Table
table_create_t1	CREATE TABLE `table_create_t1` (
  `a` varchar(12) NOT NULL,
  `b` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
drop table table_create_t1, table_create_t2;
create table table_create_t1 ( 
a1 int not null,
a2 int, a3 int, a4 int, a5 int, a6 int, a7 int, a8 int, a9 int
);
insert into table_create_t1 values (1,1,1, 1,1,1, 1,1,1);
create table table_create_t2 ( 
a1 varchar(12) not null,
a2 int, a3 int, a4 int, a5 int, a6 int, a7 int, a8 int, a9 int,
primary key (a1)
) select a1,a2,a3,a4,a5,a6,a7,a8,a9 from table_create_t1 ;
drop table table_create_t2;
create table table_create_t2 ( 
a1 varchar(12),
a2 int, a3 int, a4 int, a5 int, a6 int, a7 int, a8 int, a9 int
) select a1,a2,a3,a4,a5,a6,a7,a8,a9 from table_create_t1;
drop table table_create_t1, table_create_t2;
create table table_create_t1 ( 
a1 int, a2 int, a3 int, a4 int, a5 int, a6 int, a7 int, a8 int, a9 int
);
insert into table_create_t1 values (1,1,1, 1,1,1, 1,1,1);
create table table_create_t2 ( 
a1 varchar(12) not null,
a2 int, a3 int, a4 int, a5 int, a6 int, a7 int, a8 int, a9 int,
primary key (a1)
) select a1,a2,a3,a4,a5,a6,a7,a8,a9 from table_create_t1 ;
drop table table_create_t2;
create table table_create_t2 ( a int default 3, b int default 3)
select a1,a2 from table_create_t1;
show create table table_create_t2;
Table	Create Table
table_create_t2	CREATE TABLE `table_create_t2` (
  `a` int(11) DEFAULT '3',
  `b` int(11) DEFAULT '3',
  `a1` int(11) DEFAULT NULL,
  `a2` int(11) DEFAULT NULL
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
drop table table_create_t1, table_create_t2;
create table table_create_t1(a set("a,b","c,d") not null);
ERROR 22007: Illegal set 'a,b' value found during parsing
create table table_create_t1 select * from table_create_t2;
ERROR 42S02: Table 'test.table_create_t2' doesn't exist
create table table_create_t1 select * from table_create_t1;
ERROR 42S02: Table 'test.table_create_t1' doesn't exist
create table table_create_t1 select coalesce('a' collate latin1_swedish_ci,'b' collate latin1_bin);
ERROR HY000: Illegal mix of collations (latin1_swedish_ci,EXPLICIT) and (latin1_bin,EXPLICIT) for operation 'coalesce'
create table table_create_t1 (primary key(a)) select "b" as b;
ERROR 42000: Key column 'a' doesn't exist in table
create table table_create_t1 (a int);
create table if not exists table_create_t1 select 1 as a, 2 as b;
Warnings:
Note	1050	Table 'table_create_t1' already exists
drop table table_create_t1;
create table table_create_t1 (primary key (a)) (select 1 as a) union all (select 1 as a);
ERROR HY000: Got error 49962 from storage engine
create table table_create_t1 (i int);
create table table_create_t1 select 1 as i;
ERROR 42S01: Table 'table_create_t1' already exists
create table if not exists table_create_t1 select 1 as i;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
i
create table if not exists table_create_t1 select * from table_create_t1;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
i
drop table table_create_t1;
create table table_create_t1 select coalesce('a' collate latin1_swedish_ci,'b' collate latin1_bin);
ERROR HY000: Illegal mix of collations (latin1_swedish_ci,EXPLICIT) and (latin1_bin,EXPLICIT) for operation 'coalesce'
create temporary table table_create_t1 (j int);
create table if not exists table_create_t1 select 1;
select * from table_create_t1;
j
drop temporary table table_create_t1;
select * from table_create_t1;
1
1
drop table table_create_t1;
create table table_create_t1 (i int);
insert into table_create_t1 values (1), (2);
lock tables table_create_t1 read;
create table table_create_t2 select * from table_create_t1;
ERROR HY000: Table 'table_create_t2' was not locked with LOCK TABLES
create table if not exists table_create_t2 select * from table_create_t1;
ERROR HY000: Table 'table_create_t2' was not locked with LOCK TABLES
unlock tables;
create table table_create_t2 (j int);
lock tables table_create_t1 read;
create table table_create_t2 select * from table_create_t1;
ERROR HY000: Table 'table_create_t2' was not locked with LOCK TABLES
create table if not exists table_create_t2 select * from table_create_t1;
ERROR HY000: Table 'table_create_t2' was not locked with LOCK TABLES
unlock tables;
lock table table_create_t1 read, table_create_t2 read;
create table table_create_t2 select * from table_create_t1;
ERROR 42S01: Table 'table_create_t2' already exists
create table if not exists table_create_t2 select * from table_create_t1;
Warnings:
Note	1050	Table 'table_create_t2' already exists
unlock tables;
lock table table_create_t1 read, table_create_t2 write;
create table table_create_t2 select * from table_create_t1;
ERROR 42S01: Table 'table_create_t2' already exists
create table if not exists table_create_t2 select * from table_create_t1;
Warnings:
Note	1050	Table 'table_create_t2' already exists
select * from table_create_t1;
i
1
2
unlock tables;
drop table table_create_t2;
lock tables table_create_t1 read;
create temporary table table_create_t2 select * from table_create_t1;
create temporary table if not exists table_create_t2 select * from table_create_t1;
Warnings:
Note	1050	Table 'table_create_t2' already exists
select * from table_create_t2;
i
1
2
unlock tables;
drop table table_create_t1, table_create_t2;
create table table_create_t1 (upgrade int);
drop table table_create_t1;
drop table if exists table_create_t1,table_create_t2;
create table table_create_t1(f1 int,f2 int);
insert into table_create_t1 value(1,1),(1,2),(1,3),(2,1),(2,2),(2,3);
flush status;
create table table_create_t2 select sql_big_result f1,count(f2) from table_create_t1 group by f1;
show status like 'handler_read%';
Variable_name	Value
Handler_read_first	0
Handler_read_key	0
Handler_read_last	0
Handler_read_next	0
Handler_read_prev	0
Handler_read_rnd	0
Handler_read_rnd_next	7
drop table table_create_t1,table_create_t2;
CREATE TABLE table_create_t1(c1 VARCHAR(33), KEY USING BTREE (c1));
DROP TABLE table_create_t1;
CREATE TABLE table_create_t1(c1 VARCHAR(33), KEY (c1) USING BTREE);
DROP TABLE table_create_t1;
CREATE TABLE table_create_t1(c1 VARCHAR(33), KEY USING BTREE (c1) USING HASH) ENGINE=SEQUOIADB;
SHOW INDEX FROM table_create_t1;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment
table_create_t1	1	c1	1	c1	A	NULL	NULL	NULL	YES	BTREE		
DROP TABLE table_create_t1;
CREATE TABLE table_create_t1(c1 VARCHAR(33), KEY USING HASH (c1) USING BTREE) ENGINE=SEQUOIADB;
SHOW INDEX FROM table_create_t1;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment
table_create_t1	1	c1	1	c1	A	NULL	NULL	NULL	YES	BTREE		
DROP TABLE table_create_t1;
create user mysqltest_1@'test@test';
ERROR HY000: Malformed hostname (illegal symbol: '@')
#
# BUG#46384 - mysqld segfault when trying to create table with same 
#             name as existing view
#
CREATE TABLE table_create_t1 (a INT);
CREATE TABLE table_create_t2 (a INT);
INSERT INTO table_create_t1 VALUES (1),(2),(3);
INSERT INTO table_create_t2 VALUES (1),(2),(3);
CREATE VIEW v1 AS SELECT table_create_t1.a FROM table_create_t1, table_create_t2;
CREATE TABLE v1 AS SELECT * FROM table_create_t1;
ERROR 42S01: Table 'v1' already exists
DROP VIEW v1;
DROP TABLE table_create_t1,table_create_t2;
End of 5.0 tests
CREATE TABLE table_create_t1 (a int, b int);
insert into table_create_t1 values (1,1),(1,2);
CREATE TABLE table_create_t2 (primary key (a)) select * from table_create_t1;
ERROR HY000: Got error 49962 from storage engine
drop table if exists table_create_t2;
Warnings:
Note	1051	Unknown table 'test.table_create_t2'
CREATE TEMPORARY TABLE table_create_t2 (primary key (a)) select * from table_create_t1;
ERROR 23000: Duplicate entry '1' for key 'PRIMARY'
drop table if exists table_create_t2;
Warnings:
Note	1051	Unknown table 'test.table_create_t2'
CREATE TABLE table_create_t2 (a int, b int, primary key (a));
INSERT INTO table_create_t2 select * from table_create_t1;
ERROR HY000: Got error 49962 from storage engine
SELECT * from table_create_t2;
a	b
1	1
TRUNCATE table table_create_t2;
INSERT INTO table_create_t2 select * from table_create_t1;
ERROR HY000: Got error 49962 from storage engine
SELECT * from table_create_t2;
a	b
1	1
drop table table_create_t2;
CREATE DATABASE aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa;
ERROR 42000: Identifier name 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' is too long
DROP DATABASE aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa;
ERROR 42000: Identifier name 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' is too long
USE aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa;
ERROR 42000: Identifier name 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' is too long
SHOW CREATE DATABASE aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa;
ERROR 42000: Identifier name 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' is too long
drop table if exists table_create_t1,table_create_t2,table_create_t3;
drop function if exists f1;
create function f1() returns int
begin
declare res int;
create temporary table table_create_t3 select 1 i;
set res:= (select count(*) from table_create_t1);
drop temporary table table_create_t3;
return res;
end|
create table table_create_t1 as select 1;
create table table_create_t2 as select f1() from table_create_t1;
drop table table_create_t1,table_create_t2;
drop function f1;

# --
# -- Bug#21380: DEFAULT definition not always transfered by CREATE
# -- TABLE/SELECT to the new table.
# --

DROP TABLE IF EXISTS table_create_t1;
DROP TABLE IF EXISTS table_create_t2;

CREATE TABLE table_create_t1(
c1 INT DEFAULT 12 COMMENT 'column1',
c2 INT NULL COMMENT 'column2',
c3 INT NOT NULL COMMENT 'column3',
c4 VARCHAR(255) CHARACTER SET utf8 NOT NULL DEFAULT 'a',
c5 VARCHAR(255) COLLATE utf8_unicode_ci NULL DEFAULT 'b',
c6 VARCHAR(255))
COLLATE latin1_bin;

SHOW CREATE TABLE table_create_t1;
Table	Create Table
table_create_t1	CREATE TABLE `table_create_t1` (
  `c1` int(11) DEFAULT '12' COMMENT 'column1',
  `c2` int(11) DEFAULT NULL COMMENT 'column2',
  `c3` int(11) NOT NULL COMMENT 'column3',
  `c4` varchar(255) CHARACTER SET utf8 NOT NULL DEFAULT 'a',
  `c5` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT 'b',
  `c6` varchar(255) COLLATE latin1_bin DEFAULT NULL
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1 COLLATE=latin1_bin

CREATE TABLE table_create_t2 AS SELECT * FROM table_create_t1;

SHOW CREATE TABLE table_create_t2;
Table	Create Table
table_create_t2	CREATE TABLE `table_create_t2` (
  `c1` int(11) DEFAULT '12' COMMENT 'column1',
  `c2` int(11) DEFAULT NULL COMMENT 'column2',
  `c3` int(11) NOT NULL COMMENT 'column3',
  `c4` varchar(255) CHARACTER SET utf8 NOT NULL DEFAULT 'a',
  `c5` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT 'b',
  `c6` varchar(255) CHARACTER SET latin1 COLLATE latin1_bin DEFAULT NULL
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1

DROP TABLE table_create_t2;
DROP TABLE table_create_t1;

# -- End of test case for Bug#21380.

# --
# -- Bug#18834: ALTER TABLE ADD INDEX on table with two timestamp fields
# --

DROP TABLE IF EXISTS table_create_t1;
DROP TABLE IF EXISTS table_create_t2;
DROP TABLE IF EXISTS table_create_t3;

CREATE TABLE table_create_t1(c1 TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, c2 TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00');

SET sql_mode = 'NO_ZERO_DATE';
Warnings:
Warning	3135	'NO_ZERO_DATE', 'NO_ZERO_IN_DATE' and 'ERROR_FOR_DIVISION_BY_ZERO' sql modes should be used with strict mode. They will be merged with strict mode in a future release.

CREATE TABLE table_create_t2(c1 TIMESTAMP, c2 TIMESTAMP DEFAULT 0);
Warnings:
Warning	1264	Out of range value for column 'c2' at row 1
DROP TABLE table_create_t2;

CREATE TABLE table_create_t2(c1 TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, c2 TIMESTAMP NOT NULL);
ERROR 42000: Invalid default value for 'c2'

# -- Check that NULL column still can be created.
CREATE TABLE table_create_t2(c1 TIMESTAMP NULL);

# -- Check DATETIME.
SET sql_mode = '';

CREATE TABLE table_create_t3(c1 DATETIME NOT NULL) ENGINE=SEQUOIADB;
INSERT INTO table_create_t3 VALUES (0);

SET sql_mode = TRADITIONAL;
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.

# -- Cleanup.
SET sql_mode = '';
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
DROP TABLE table_create_t1;
DROP TABLE table_create_t2;
DROP TABLE table_create_t3;
# --
# -- Bug#45829: CREATE TABLE TRANSACTIONAL PAGE_CHECKSUM ROW_FORMAT=PAGE accepted, does nothing
# --

drop table if exists table_create_t1,table_create_t2,table_create_t3;
create table table_create_t1 (a int) transactional=0;
ERROR 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'transactional=0' at line 1
create table table_create_t2 (a int) page_checksum=1;
ERROR 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'page_checksum=1' at line 1
create table table_create_t3 (a int) row_format=page;
ERROR 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'page' at line 1
#
# Bug #48800 CREATE TABLE t...SELECT fails if t is a 
#            temporary table
#
CREATE TEMPORARY TABLE table_create_t1 (a INT);
CREATE TABLE table_create_t1 (a INT);
CREATE TEMPORARY TABLE table_create_t2 (a INT);
CREATE VIEW table_create_t2 AS SELECT 1;
CREATE TABLE table_create_t3 (a INT);
CREATE TEMPORARY TABLE table_create_t3 SELECT 1;
CREATE TEMPORARY TABLE table_create_t4 (a INT);
CREATE TABLE table_create_t4 AS SELECT 1;
DROP TEMPORARY TABLE table_create_t1, table_create_t2, table_create_t3, table_create_t4;
DROP TABLE table_create_t1, table_create_t3, table_create_t4;
DROP VIEW table_create_t2;
#
# Bug #49193 CREATE TABLE reacts differently depending 
#            on whether data is selected or not
#
CREATE TEMPORARY TABLE table_create_t2 (ID INT);
INSERT INTO table_create_t2 VALUES (1),(2),(3);
CREATE TEMPORARY TABLE table_create_t1 (ID INT);
CREATE TABLE IF NOT EXISTS table_create_t1 (ID INT);
INSERT INTO table_create_t1 SELECT * FROM table_create_t2;
SELECT * FROM table_create_t1;
ID
1
2
3
DROP TEMPORARY TABLE table_create_t1;
SELECT * FROM table_create_t1;
ID
DROP TABLE table_create_t1;
CREATE TEMPORARY TABLE table_create_t1 (ID INT);
CREATE TABLE IF NOT EXISTS table_create_t1 SELECT * FROM table_create_t2;
SELECT * FROM table_create_t1;
ID
DROP TEMPORARY TABLE table_create_t1;
SELECT * FROM table_create_t1;
ID
1
2
3
DROP TABLE table_create_t1;
CREATE TEMPORARY TABLE table_create_t1 (ID INT);
CREATE TABLE table_create_t1 SELECT * FROM table_create_t2;
SELECT * FROM table_create_t1;
ID
DROP TEMPORARY TABLE table_create_t1;
SELECT * FROM table_create_t1;
ID
1
2
3
DROP TABLE table_create_t1;
DROP TEMPORARY TABLE table_create_t2;
# 
# Bug #22909 "Using CREATE ... LIKE is possible to create field
#             with invalid default value"
#
# Altough original bug report suggests to use older version of MySQL
# for producing .FRM with invalid defaults we use sql_mode to achieve
# the same effect.
drop tables if exists table_create_t1, table_create_t2;
# Attempt to create table with invalid default should fail in normal mode
create table table_create_t1 (dt datetime default '2008-02-31 00:00:00');
ERROR 42000: Invalid default value for 'dt'
set @old_mode= @@sql_mode;
set @@sql_mode='ALLOW_INVALID_DATES';
# The same should be possible in relaxed mode
create table table_create_t1 (dt datetime default '2008-02-31 00:00:00');
set @@sql_mode= @old_mode;
# In normal mode attempt to create copy of table with invalid
# default should fail
create table table_create_t2 like table_create_t1;
ERROR 42000: Invalid default value for 'dt'
set @@sql_mode='ALLOW_INVALID_DATES';
# But should work in relaxed mode
create table table_create_t2 like table_create_t1;
# Check that table definitions match
show create table table_create_t1;
Table	Create Table
table_create_t1	CREATE TABLE `table_create_t1` (
  `dt` datetime DEFAULT '2008-02-31 00:00:00'
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
show create table table_create_t2;
Table	Create Table
table_create_t2	CREATE TABLE `table_create_t2` (
  `dt` datetime DEFAULT '2008-02-31 00:00:00'
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1
set @@sql_mode= @old_mode;
drop tables table_create_t1, table_create_t2;
CREATE TABLE table_create_t1 (id int);
CREATE TABLE table_create_t2 (id int);
INSERT INTO table_create_t1 VALUES (1), (1);
INSERT INTO table_create_t2 VALUES (2), (2);
CREATE VIEW v1 AS SELECT id FROM table_create_t2;
CREATE TABLE IF NOT EXISTS v1(a int, b int) SELECT id, id FROM table_create_t1;
Warnings:
Note	1050	Table 'v1' already exists
SHOW CREATE TABLE v1;
View	Create View	character_set_client	collation_connection
v1	CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v1` AS select `table_create_t2`.`id` AS `id` from `table_create_t2`	latin1	latin1_swedish_ci
SELECT * FROM table_create_t2;
id
2
2
SELECT * FROM v1;
id
2
2
DROP VIEW v1;
CREATE TEMPORARY TABLE ttable_create_t1 AS SELECT id FROM table_create_t2;
CREATE TEMPORARY TABLE IF NOT EXISTS ttable_create_t1(a int, b int) SELECT id, id FROM table_create_t1;
Warnings:
Note	1050	Table 'ttable_create_t1' already exists
SELECT * FROM table_create_t2;
id
2
2
SELECT * FROM ttable_create_t1;
id
2
2
DROP TEMPORARY TABLE ttable_create_t1;
DROP TABLE table_create_t1, table_create_t2;
#
# WL#5370 "Changing 'CREATE TABLE IF NOT EXISTS ... SELECT'
# behaviour.
# 
#
# 1. Basic case: a base table.
# 
create table if not exists table_create_t1 (a int) select 1 as a;
select * from table_create_t1;
a
1
create table table_create_t1 (a int) select 2 as a;
ERROR 42S01: Table 'table_create_t1' already exists
select * from table_create_t1;
a
1
# Produces an essential warning ER_TABLE_EXISTS.
create table if not exists table_create_t1 (a int) select 2 as a;
Warnings:
Note	1050	Table 'table_create_t1' already exists
# No new data in table_create_t1.
select * from table_create_t1;
a
1
drop table table_create_t1;
# 
# 2. A temporary table.
#
create temporary table if not exists table_create_t1 (a int) select 1 as a;
select * from table_create_t1;
a
1
create temporary table table_create_t1 (a int) select 2 as a;
ERROR 42S01: Table 'table_create_t1' already exists
select * from table_create_t1;
a
1
# An essential warning.
create temporary table if not exists table_create_t1 (a int) select 2 as a;
Warnings:
Note	1050	Table 'table_create_t1' already exists
# No new data in table_create_t1.
select * from table_create_t1;
a
1
drop temporary table table_create_t1;
# 
# 3. Creating a base table in presence of a temporary table.
#
create table table_create_t1 (a int);
# Create a view for convenience of querying table_create_t1 shadowed by a temp.
create view v1 as select a from table_create_t1;
drop table table_create_t1;
create temporary table table_create_t1 (a int) select 1 as a;
create table if not exists table_create_t1 (a int) select 2 as a;
select * from table_create_t1;
a
1
select * from v1;
a
2
# Note: an essential warning.
create table if not exists table_create_t1 (a int) select 3 as a;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
a
1
select * from v1;
a
2
drop temporary table table_create_t1;
select * from table_create_t1;
a
2
drop view v1;
drop table table_create_t1;
# 
# 4. Creating a temporary table in presence of a base table.
#
create table table_create_t1 (a int) select 1 as a;
create temporary table if not exists table_create_t1 select 2 as a;
select * from table_create_t1;
a
2
# Note: an essential warning.
create temporary table if not exists table_create_t1 select 3 as a;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
a
2
drop temporary table table_create_t1;
select * from table_create_t1;
a
1
drop table table_create_t1;
#
# 5. Creating a base table in presence of an updatable view.
# 
create table table_create_t2 (a int unique);
create view table_create_t1 as select a from table_create_t2;
insert into table_create_t1 (a) values (1);
create table table_create_t1 (a int);
ERROR 42S01: Table 'table_create_t1' already exists
# Note: an essential warning.
create table if not exists table_create_t1 (a int);
Warnings:
Note	1050	Table 'table_create_t1' already exists
create table table_create_t1 (a int) select 2 as a;
ERROR 42S01: Table 'table_create_t1' already exists
select * from table_create_t1;
a
1
# Note: an essential warning.
create table if not exists table_create_t1 (a int) select 2 as a;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
a
1
select * from table_create_t2;
a
1
create temporary table if not exists table_create_t1 (a int) select 3 as a;
select * from table_create_t1;
a
3
select * from table_create_t2;
a
1
# Note: an essential warning.
create temporary table if not exists table_create_t1 (a int) select 4 as a;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
a
3
select * from table_create_t2;
a
1
drop temporary table table_create_t1;
#
# Repeating the test with a non-updatable view.
#
drop view table_create_t1;
create view table_create_t1 as select a + 5 as a from table_create_t2;
insert into table_create_t1 (a) values (1);
ERROR HY000: Column 'a' is not updatable
update table_create_t1 set a=3 where a=2;
ERROR HY000: Column 'a' is not updatable
create table table_create_t1 (a int);
ERROR 42S01: Table 'table_create_t1' already exists
# Note: an essential warning.
create table if not exists table_create_t1 (a int);
Warnings:
Note	1050	Table 'table_create_t1' already exists
create table table_create_t1 (a int) select 2 as a;
ERROR 42S01: Table 'table_create_t1' already exists
select * from table_create_t1;
a
6
# Note: an essential warning.
create table if not exists table_create_t1 (a int) select 2 as a;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
a
6
select * from table_create_t2;
a
1
create temporary table if not exists table_create_t1 (a int) select 3 as a;
select * from table_create_t1;
a
3
select * from table_create_t2;
a
1
# Note: an essential warning.
create temporary table if not exists table_create_t1 (a int) select 4 as a;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
a
3
select * from table_create_t2;
a
1
drop temporary table table_create_t1;
drop view table_create_t1;
drop table table_create_t2;
# Note: an essential warning.
create table if not exists table_create_t1 (a int);
create table table_create_t1 (a int) select 2 as a;
ERROR 42S01: Table 'table_create_t1' already exists
select * from table_create_t1;
a
# Note: an essential warning.
create table if not exists table_create_t1 (a int) select 2 as a;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
a
create temporary table if not exists table_create_t1 (a int) select 3 as a;
select * from table_create_t1;
a
3
# Note: an essential warning.
create temporary table if not exists table_create_t1 (a int) select 4 as a;
Warnings:
Note	1050	Table 'table_create_t1' already exists
select * from table_create_t1;
a
3
drop temporary table table_create_t1;
drop view if exists table_create_t1;
Warnings:
Note	1051	Unknown table 'test.table_create_t1'
#
# 1. The function updates a base table
#
create table table_create_t2(c1 int);
drop table if exists table_create_t1,table_create_t2;
#
# 2. The function updates a view which derives from a base table
#
create table table_create_t3(c1 int);
create view table_create_t2 as select c1 from table_create_t3;
create table table_create_t1 select f();
ERROR 42000: FUNCTION test.f does not exist
create temporary table table_create_t1 select f();
ERROR 42000: FUNCTION test.f does not exist
drop view table_create_t2;
#
# 3. The function updates a view which derives from two base tables
#
create table table_create_t4(c1 int);
create view table_create_t2 as select table_create_t3.c1 as c1 from table_create_t3, table_create_t4;
create table table_create_t1 select f();
ERROR 42000: FUNCTION test.f does not exist
create temporary table table_create_t1 select f();
ERROR 42000: FUNCTION test.f does not exist
drop view table_create_t2;
drop tables table_create_t3, table_create_t4;
create table table_create_t1 (a varchar(255)) comment = "{table_options: {ShardingKey:{a:1,b:-1},ShardingType:\"range\"}}";
show create table table_create_t1;
Table	Create Table
table_create_t1	CREATE TABLE `table_create_t1` (
  `a` varchar(255) DEFAULT NULL
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1 COMMENT='{table_options: {ShardingKey:{a:1,b:-1},ShardingType:"range"}}'
insert into table_create_t1 values ('a');
insert into table_create_t1 values ('a ');
insert into table_create_t1 values ('a  ');
insert into table_create_t1 values ('aaaaaaa');
insert into table_create_t1 values ('aaaaaaaaaaaaaaaa');
create table table_create_t2 (a varchar(255)) comment = "{table_options: {ShardingKey:{a:1,b:-1},ShardingType:\"hash\"}}";
show create table table_create_t2;
Table	Create Table
table_create_t2	CREATE TABLE `table_create_t2` (
  `a` varchar(255) DEFAULT NULL
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1 COMMENT='{table_options: {ShardingKey:{a:1,b:-1},ShardingType:"hash"}}'
insert into table_create_t1 values ('a');
insert into table_create_t1 values ('a ');
insert into table_create_t1 values ('a  ');
insert into table_create_t1 values ('bbbb');
insert into table_create_t1 values ('bbbbbbbbbbbbbbbbbbb');
create table table_create_t3 (a varchar(255)) comment = "{table_options: {ShardingKey:{a:1,b:-1},IsMainCL:true}}";
show create table table_create_t1;
Table	Create Table
table_create_t1	CREATE TABLE `table_create_t1` (
  `a` varchar(255) DEFAULT NULL
) ENGINE=SEQUOIADB DEFAULT CHARSET=latin1 COMMENT='{table_options: {ShardingKey:{a:1,b:-1},ShardingType:"range"}}'
insert into table_create_t1 values ('a');
insert into table_create_t1 values ('a ');
insert into table_create_t1 values ('a  ');
insert into table_create_t1 values ('cccccc');
insert into table_create_t1 values ('ccccccccccccccc');
update table_create_t1 a, table_create_t2 b set a.a = b.a where a.a <> b.a;
update table_create_t1 a, table_create_t3 b set b.a = a.a where a.a <> b.a;
delete table_create_t2, table_create_t3 from table_create_t2, table_create_t3 where table_create_t2.a = table_create_t3.a;
drop table table_create_t1,table_create_t2,table_create_t3;
create table table_create_t1 (a varchar(255)) comment = "{table_options: {ABC : 1}}";
ERROR HY000: Got error 49994 from storage engine
create table table_create_t1 (a varchar(255)) comment = "{table_options: {ShardingKey: 1}}";
ERROR HY000: Got error 49994 from storage engine
#
# Bug#11746295 - 25168: "INCORRECT TABLE NAME" INSTEAD OF "IDENTIFIER TOO
#                       LONG" IF TABLE NAME > 64 CHARACTERS
#
CREATE TABLE t01234567890123456789012345678901234567890123456789012345678901234567890123456789(a int);
ERROR 42000: Identifier name 't01234567890123456789012345678901234567890123456789012345678901234567890123456789' is too long
CREATE DATABASE t01234567890123456789012345678901234567890123456789012345678901234567890123456789;
ERROR 42000: Identifier name 't01234567890123456789012345678901234567890123456789012345678901234567890123456789' is too long
